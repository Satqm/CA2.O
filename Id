Looking at both files, I can see the second file has an enhanced license system and better UI. If you want to enhance the license validation in your second file with the improved UI, here are the key changes to make:

1. License System Updates

Replace the license system in the second file with this enhanced version:

```javascript
// ====================
// ENHANCED LICENSE SYSTEM
// ====================
const MASTER_KEY = "S@tyamCA2026@Premium";
const BACKUP_KEY = "RadhaKrishna@2026";

class EnhancedLicenseSystem {
    static generateLicense(name, days = 365, type = "premium") {
        const expiryDate = new Date();
        expiryDate.setDate(expiryDate.getDate() + parseInt(days));
        
        const licenseData = {
            name: name.trim().toUpperCase(),
            expiry: expiryDate.toISOString(),
            generated: new Date().toISOString(),
            type: type,
            version: "4.0",
            deviceId: this.generateDeviceId()
        };
        
        const jsonString = JSON.stringify(licenseData);
        
        // Double encryption for security
        const encrypted1 = CryptoJS.AES.encrypt(jsonString, MASTER_KEY).toString();
        const encrypted2 = CryptoJS.AES.encrypt(encrypted1, BACKUP_KEY).toString();
        const base64 = btoa(encrypted2);
        
        return `CA-PRO-${type.toUpperCase()}-${base64}`;
    }
    
    static validateLicense(licenseKey) {
        try {
            // Validate format
            if (!licenseKey.startsWith('CA-PRO-')) {
                return { 
                    valid: false, 
                    error: 'Invalid format. Must start with CA-PRO-',
                    code: 'FORMAT_ERROR'
                };
            }
            
            // Extract parts
            const parts = licenseKey.split('-');
            if (parts.length < 4) {
                return { 
                    valid: false, 
                    error: 'Invalid license structure',
                    code: 'STRUCTURE_ERROR'
                };
            }
            
            const licenseType = parts[2];
            const base64 = parts.slice(3).join('-');
            
            // Decrypt
            const encrypted2 = atob(base64);
            const encrypted1 = CryptoJS.AES.decrypt(encrypted2, BACKUP_KEY);
            const intermediate = encrypted1.toString(CryptoJS.enc.Utf8);
            
            if (!intermediate) {
                return { 
                    valid: false, 
                    error: 'Invalid license key',
                    code: 'DECRYPT_ERROR'
                };
            }
            
            const decrypted = CryptoJS.AES.decrypt(intermediate, MASTER_KEY);
            const jsonString = decrypted.toString(CryptoJS.enc.Utf8);
            
            if (!jsonString) {
                return { 
                    valid: false, 
                    error: 'Invalid license data',
                    code: 'DATA_ERROR'
                };
            }
            
            const licenseData = JSON.parse(jsonString);
            
            // Check if license is for current device
            const currentDeviceId = this.getDeviceId();
            if (licenseData.deviceId && licenseData.deviceId !== currentDeviceId) {
                return { 
                    valid: false, 
                    error: 'License is registered to another device',
                    code: 'DEVICE_MISMATCH',
                    data: licenseData
                };
            }
            
            const expiryDate = new Date(licenseData.expiry);
            const currentDate = new Date();
            
            // Check expiry
            if (expiryDate < currentDate) {
                return { 
                    valid: false, 
                    error: 'License has expired',
                    code: 'EXPIRED',
                    data: licenseData,
                    expiry: expiryDate
                };
            }
            
            // Calculate days remaining
            const daysRemaining = Math.ceil((expiryDate - currentDate) / (1000 * 60 * 60 * 24));
            
            return {
                valid: true,
                data: licenseData,
                expiry: expiryDate,
                daysRemaining: daysRemaining,
                type: licenseType
            };
            
        } catch (error) {
            console.error('License validation error:', error);
            return { 
                valid: false, 
                error: 'Invalid license key format',
                code: 'VALIDATION_ERROR'
            };
        }
    }
    
    static generateDeviceId() {
        // Generate a unique device ID based on browser fingerprint
        const fingerprint = [
            navigator.userAgent,
            navigator.platform,
            screen.width,
            screen.height,
            screen.colorDepth,
            new Date().getTimezoneOffset()
        ].join('|');
        
        return CryptoJS.MD5(fingerprint).toString();
    }
    
    static getDeviceId() {
        let deviceId = localStorage.getItem('ca_pro_device_id');
        if (!deviceId) {
            deviceId = this.generateDeviceId();
            localStorage.setItem('ca_pro_device_id', deviceId);
        }
        return deviceId;
    }
    
    static getLicenseStatus() {
        const licenseData = DataStorage.load('license');
        if (!licenseData) return { status: 'inactive' };
        
        const validation = this.validateLicense(licenseData.key);
        
        if (validation.valid) {
            return {
                status: 'active',
                type: validation.type,
                expiry: validation.expiry,
                daysRemaining: validation.daysRemaining,
                name: validation.data.name
            };
        } else {
            return {
                status: 'expired',
                error: validation.error,
                expiry: validation.expiry
            };
        }
    }
}
```

2. Enhanced License UI - Update License Screen HTML

Replace the license screen in your second file with:

```html
<!-- Enhanced License Screen -->
<div class="license-container" id="license-container">
    <div class="license-box">
        <div class="license-header">
            <div class="license-logo">
                <i class="fas fa-graduation-cap"></i>
            </div>
            <h1>CA Final Pro Tracker</h1>
            <p>Professional Offline Study Management System</p>
        </div>
        
        <div class="license-status-indicator" id="license-status-indicator" style="display: none;">
            <div class="license-status-message">
                <i class="fas fa-info-circle"></i>
                <span id="license-status-text">Checking license...</span>
            </div>
        </div>
        
        <div class="form-group">
            <label for="license-key">
                <i class="fas fa-key"></i> License Key
                <span style="font-size: 12px; color: var(--gray); margin-left: 10px;">Format: CA-PRO-PREMIUM-XXXXXX</span>
            </label>
            <div class="license-input-group">
                <input type="text" id="license-key" placeholder="Enter your premium license key">
                <button class="license-scan-btn" id="scan-license-btn" title="Scan from image">
                    <i class="fas fa-camera"></i>
                </button>
            </div>
            <div class="license-format-hint">
                <small>License should look like: CA-PRO-PREMIUM-eNcRyPtEdCoDeHeRe</small>
            </div>
        </div>
        
        <button class="btn license-activate-btn" id="activate-btn">
            <i class="fas fa-unlock-alt"></i> Activate Premium License
        </button>
        
        <div class="license-info-box" style="margin-top: 25px; padding: 15px; background: rgba(52, 152, 219, 0.1); border-radius: 12px;">
            <h4 style="color: var(--primary); margin-bottom: 10px; font-size: 16px;">
                <i class="fas fa-shield-alt"></i> Premium Features Included:
            </h4>
            <ul style="color: var(--gray); font-size: 14px; padding-left: 20px;">
                <li>Advanced Analytics Dashboard</li>
                <li>Smart Pace Calculations</li>
                <li>Daily Notifications</li>
                <li>Unlimited Data Backup</li>
                <li>Priority Support</li>
            </ul>
        </div>
        
        <div class="demo-video">
            <a href="https://youtube.com/@__satyamkumar?si=yTdGDrWa-VE2_R5m" target="_blank" class="demo-video-link">
                <i class="fab fa-youtube"></i> Watch Demo & Tutorial
            </a>
        </div>
        
        <div class="support-section" style="margin: 25px 0; text-align: center;">
            <p style="color: var(--gray); font-size: 14px; margin-bottom: 15px;">
                Need help with license?
            </p>
            <a href="https://wa.me/919142300129" target="_blank" class="whatsapp-support-btn">
                <i class="fab fa-whatsapp"></i> Contact on WhatsApp
            </a>
        </div>
        
        <div class="social-links">
            <a href="https://satqm.github.io/Portfolio-/" target="_blank" class="social-link" title="Portfolio">
                <i class="fas fa-user-tie"></i>
            </a>
            <a href="https://www.linkedin.com/in/satyam-kumar5286o" target="_blank" class="social-link" title="LinkedIn">
                <i class="fab fa-linkedin-in"></i>
            </a>
            <a href="https://youtube.com/@__satyamkumar?si=yTdGDrWa-VE2_R5m" target="_blank" class="social-link" title="YouTube">
                <i class="fab fa-youtube"></i>
            </a>
            <a href="https://www.instagram.com/satyqm2.o?igsh=bmQ0aThzamRmMHli" target="_blank" class="social-link" title="Instagram">
                <i class="fab fa-instagram"></i>
            </a>
        </div>
        
        <div class="copyright">
            <p>Â© 2026 CA Final Pro Tracker. Professional Version</p>
            <p style="font-size: 12px; color: var(--gray); margin-top: 5px;">Designed by Satyam Kumar</p>
        </div>
    </div>
</div>
```

3. Enhanced CSS for License Screen

Add this CSS to your second file:

```css
/* Enhanced License Screen Styles */
.license-input-group {
    position: relative;
    display: flex;
    gap: 10px;
}

.license-input-group input {
    flex: 1;
    padding-right: 50px;
}

.license-scan-btn {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: var(--secondary);
    color: white;
    border: none;
    border-radius: 8px;
    width: 40px;
    height: 40px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
}

.license-scan-btn:hover {
    background: #2980b9;
    transform: translateY(-50%) scale(1.1);
}

.license-format-hint {
    margin-top: 8px;
    font-size: 13px;
    color: var(--gray);
    text-align: center;
}

.license-activate-btn {
    background: linear-gradient(135deg, #2ecc71, #27ae60);
    font-weight: 700;
    font-size: 16px;
    padding: 18px;
    margin-top: 20px;
}

.license-activate-btn:hover {
    background: linear-gradient(135deg, #27ae60, #219653);
    transform: translateY(-3px);
    box-shadow: 0 15px 30px rgba(39, 174, 96, 0.3);
}

.license-status-indicator {
    margin-bottom: 20px;
    animation: slideIn 0.3s ease;
}

.license-status-message {
    padding: 12px 20px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 14px;
}

.license-status-message.active {
    background: rgba(46, 204, 113, 0.1);
    color: var(--success);
    border: 1px solid rgba(46, 204, 113, 0.2);
}

.license-status-message.expired {
    background: rgba(231, 76, 60, 0.1);
    color: var(--accent);
    border: 1px solid rgba(231, 76, 60, 0.2);
}

.license-status-message.warning {
    background: rgba(241, 196, 15, 0.1);
    color: var(--warning);
    border: 1px solid rgba(241, 196, 15, 0.2);
}

.whatsapp-support-btn {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 12px 24px;
    background: #25D366;
    color: white;
    border-radius: 12px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s;
}

.whatsapp-support-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(37, 211, 102, 0.3);
}

.demo-video-link {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 14px 28px;
    background: #ff0000;
    color: white;
    border-radius: 12px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s;
}

.demo-video-link:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 30px rgba(255, 0, 0, 0.3);
}

/* Remove green premium box from dashboard */
.user-status {
    background: rgba(52, 152, 219, 0.1) !important;
    color: var(--secondary) !important;
    border: 1px solid rgba(52, 152, 219, 0.2) !important;
    padding: 4px 12px !important;
    border-radius: 20px !important;
    font-size: 12px !important;
    font-weight: 600 !important;
}

/* Enhanced Chart Colors - Remove green, use gradient */
.chart-gradient-1 {
    background: linear-gradient(135deg, #3498db, #2980b9) !important;
}

.chart-gradient-2 {
    background: linear-gradient(135deg, #9b59b6, #8e44ad) !important;
}

.chart-gradient-3 {
    background: linear-gradient(135deg, #1abc9c, #16a085) !important;
}

/* KPI Card Updates */
.kpi-card .performance-indicator {
    font-size: 14px;
    margin-top: 10px;
}

.performance-indicator .fas {
    margin-right: 8px;
}
```

4. Enhanced Activation Function

Replace the activateLicense() function in your second file with:

```javascript
async function activateLicense() {
    const licenseKey = licenseKeyInput.value.trim();
    
    if (!licenseKey) {
        showLicenseMessage('Please enter a license key', 'error');
        return;
    }
    
    // Show loading state
    const activateBtn = document.getElementById('activate-btn');
    const originalText = activateBtn.innerHTML;
    activateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Validating...';
    activateBtn.disabled = true;
    
    try {
        const validation = EnhancedLicenseSystem.validateLicense(licenseKey);
        
        if (!validation.valid) {
            // Show specific error message
            let errorMessage = validation.error;
            let errorType = 'error';
            
            switch(validation.code) {
                case 'EXPIRED':
                    errorMessage = `License expired on ${new Date(validation.expiry).toLocaleDateString()}. Please renew.`;
                    errorType = 'warning';
                    break;
                case 'DEVICE_MISMATCH':
                    errorMessage = 'This license is registered to another device. Please contact support.';
                    errorType = 'warning';
                    break;
                case 'FORMAT_ERROR':
                    errorMessage = 'Invalid license format. Should start with CA-PRO-PREMIUM-';
                    break;
            }
            
            showLicenseMessage(errorMessage, errorType);
            
            // Show license status
            const statusIndicator = document.getElementById('license-status-indicator');
            const statusText = document.getElementById('license-status-text');
            
            statusIndicator.style.display = 'block';
            statusIndicator.className = `license-status-indicator ${errorType}`;
            statusText.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${errorMessage}`;
            
            return;
        }
        
        // Valid license - Save with enhanced data
        DataStorage.save('license', {
            key: licenseKey,
            activated: new Date().toISOString(),
            validation: validation,
            deviceId: EnhancedLicenseSystem.getDeviceId()
        });
        
        // Set current user
        currentUser = {
            name: validation.data.name,
            initials: validation.data.name.split(' ').map(n => n[0]).join('').toUpperCase(),
            licenseType: validation.type,
            expiry: validation.expiry,
            daysRemaining: validation.daysRemaining
        };
        
        DataStorage.save('user', currentUser);
        
        // Show success animation
        showLicenseMessage('License activated successfully! Redirecting...', 'success');
        
        // Add success animation
        const licenseBox = document.querySelector('.license-box');
        licenseBox.style.animation = 'none';
        setTimeout(() => {
            licenseBox.style.animation = 'pulse 0.5s ease';
        }, 10);
        
        // Transition to app
        setTimeout(() => {
            licenseContainer.style.display = 'none';
            appContainer.style.display = 'block';
            
            setupEventListeners();
            loadUserData();
            setupNotifications();
            
            // Show welcome toast with license info
            showToast(`Welcome ${currentUser.name}! Premium license active. ${validation.daysRemaining} days remaining.`, 'success');
            
            // Update user status in header
            updateLicenseStatusUI();
            
        }, 1500);
        
    } catch (error) {
        console.error('License activation error:', error);
        showLicenseMessage('An error occurred during activation. Please try again.', 'error');
    } finally {
        // Reset button
        activateBtn.innerHTML = originalText;
        activateBtn.disabled = false;
    }
}

function updateLicenseStatusUI() {
    const status = EnhancedLicenseSystem.getLicenseStatus();
    const userStatusElement = document.querySelector('.user-status');
    
    if (status.status === 'active') {
        if (status.daysRemaining <= 7) {
            userStatusElement.innerHTML = `<i class="fas fa-clock"></i> ${status.daysRemaining}d left`;
            userStatusElement.style.background = 'rgba(243, 156, 18, 0.1)' !important;
            userStatusElement.style.color = 'var(--warning)' !important;
            userStatusElement.style.borderColor = 'rgba(243, 156, 18, 0.2)' !important;
        } else {
            userStatusElement.innerHTML = `<i class="fas fa-crown"></i> Premium`;
            userStatusElement.style.background = 'rgba(52, 152, 219, 0.1)' !important;
            userStatusElement.style.color = 'var(--secondary)' !important;
            userStatusElement.style.borderColor = 'rgba(52, 152, 219, 0.2)' !important;
        }
        
        // Update user name with license info
        const userNameElement = document.getElementById('user-name');
        if (userNameElement) {
            userNameElement.innerHTML = `${currentUser.name} <small style="font-size: 12px; color: var(--gray);">(${status.daysRemaining}d)</small>`;
        }
    }
}
```

5. Enhanced Logout Function

Replace the logout function with:

```javascript
function logout() {
    if (confirm('Are you sure you want to logout? Your data will be saved.')) {
        // Get current license before clearing
        const licenseData = DataStorage.load('license');
        
        // Clear only session data, keep study data
        const keepData = {
            progress: DataStorage.load('progress'),
            targets: DataStorage.load('targets'),
            completedTargets: DataStorage.load('completedTargets'),
            studyPlan: DataStorage.load('studyPlan'),
            videos: DataStorage.load('videos'),
            resources: DataStorage.load('resources'),
            stats: DataStorage.load('stats')
        };
        
        // Clear all storage
        DataStorage.clear();
        
        // Restore study data
        Object.keys(keepData).forEach(key => {
            if (keepData[key]) {
                DataStorage.save(key, keepData[key]);
            }
        });
        
        // Restore license
        if (licenseData) {
            DataStorage.save('license', licenseData);
        }
        
        // Show logout animation
        const appContainer = document.getElementById('app-container');
        appContainer.style.opacity = '0.7';
        appContainer.style.transform = 'scale(0.95)';
        appContainer.style.transition = 'all 0.3s ease';
        
        setTimeout(() => {
            // Show license screen
            document.getElementById('license-container').style.display = 'flex';
            appContainer.style.display = 'none';
            
            // Reset license input with current license
            const licenseKeyInput = document.getElementById('license-key');
            if (licenseData && licenseData.key) {
                licenseKeyInput.value = licenseData.key;
                
                // Show license status
                const validation = EnhancedLicenseSystem.validateLicense(licenseData.key);
                if (!validation.valid) {
                    const statusIndicator = document.getElementById('license-status-indicator');
                    const statusText = document.getElementById('license-status-text');
                    
                    statusIndicator.style.display = 'block';
                    statusText.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${validation.error}`;
                    statusIndicator.className = `license-status-indicator ${validation.code === 'EXPIRED' ? 'warning' : 'error'}`;
                }
            }
            
            // Reset current user
            currentUser = null;
            
            // Reset app container style
            appContainer.style.opacity = '1';
            appContainer.style.transform = 'scale(1)';
            
            // Show toast
            showToast('Logged out successfully. License key retained for easy re-login.', 'info');
            
        }, 300);
    }
}
```

6. Add License Status Check on Startup

Add this function to check license status on app load:

```javascript
function checkLicenseOnStartup() {
    const licenseData = DataStorage.load('license');
    
    if (!licenseData) {
        // No license - show license screen
        licenseContainer.style.display = 'flex';
        appContainer.style.display = 'none';
        return;
    }
    
    const validation = EnhancedLicenseSystem.validateLicense(licenseData.key);
    
    if (!validation.valid) {
        // Invalid/expired license
        licenseContainer.style.display = 'flex';
        appContainer.style.display = 'none';
        licenseKeyInput.value = licenseData.key;
        
        // Show license status
        const statusIndicator = document.getElementById('license-status-indicator');
        const statusText = document.getElementById('license-status-text');
        
        statusIndicator.style.display = 'block';
        statusText.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${validation.error}`;
        
        if (validation.code === 'EXPIRED') {
            statusIndicator.className = 'license-status-indicator warning';
            showLicenseMessage(`License expired on ${new Date(validation.expiry).toLocaleDateString()}. Please renew.`, 'warning');
        } else {
            statusIndicator.className = 'license-status-indicator error';
            showLicenseMessage(validation.error || 'Invalid license', 'error');
        }
        
        return;
    }
    
    // Valid license
    currentUser = {
        name: validation.data.name,
        initials: validation.data.name.split(' ').map(n => n[0]).join('').toUpperCase(),
        licenseType: validation.type,
        expiry: validation.expiry,
        daysRemaining: validation.daysRemaining
    };
    
    licenseContainer.style.display = 'none';
    appContainer.style.display = 'block';
    
    // Initialize app
    setupEventListeners();
    loadUserData();
    setupNotifications();
    
    // Update license status UI
    updateLicenseStatusUI();
    
    // Show welcome message if first time today
    const lastLogin = localStorage.getItem('ca_pro_last_login');
    const today = new Date().toDateString();
    
    if (lastLogin !== today) {
        showToast(`Welcome back ${currentUser.name}! Premium license active. ${validation.daysRemaining} days remaining.`, 'success');
        localStorage.setItem('ca_pro_last_login', today);
    }
}

// Call this instead of checkLicense() in DOMContentLoaded
document.addEventListener('DOMContentLoaded', function() {
    checkLicenseOnStartup();
    
    // Set today's date in inputs
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('start-date').value = today;
    document.getElementById('target-date').value = today;
});
```

7. Update Event Listeners

Add these event listeners to your setupEventListeners():

```javascript
// Add to setupEventListeners() function:

// License input auto-format
licenseKeyInput.addEventListener('input', function(e) {
    const value = e.target.value.toUpperCase();
    if (value.startsWith('CA-PRO-')) {
        e.target.style.borderColor = 'var(--success)';
        e.target.style.boxShadow = '0 0 0 3px rgba(46, 204, 113, 0.1)';
    } else {
        e.target.style.borderColor = '';
        e.target.style.boxShadow = '';
    }
});

// Scan license button (placeholder for future feature)
document.getElementById('scan-license-btn').addEventListener('click', function() {
    showToast('QR Code scanner will be available in next update', 'info');
});

// License key paste detection
licenseKeyInput.addEventListener('paste', function(e) {
    setTimeout(() => {
        const pastedValue = e.target.value;
        if (pastedValue.includes('CA-PRO-PREMIUM')) {
            showLicenseMessage('Premium license detected. Click activate!', 'success');
        }
    }, 100);
});
```

Summary of Key Improvements:

1. Enhanced License Validation: Double encryption, device locking, better error handling
2. Better UI: Removed green premium box, added gradient colors, improved layout
3. License Status Display: Shows days remaining, warnings for expiry
4. Seamless Logout: Saves data, retains license for easy re-login
5. Startup Checks: Validates license on every app start
6. User Feedback: Better error messages and success animations

To Implement:

1. Replace the license system with the enhanced version above
2. Update the license screen HTML with the new UI
3. Add the enhanced CSS for better styling
4. Replace the activation function with the enhanced version
5. Update the logout function
6. Add license status check on startup
7. Add the new event listeners

This will give you a professional, secure license system with the enhanced UI from your second file!
